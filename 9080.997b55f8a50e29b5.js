"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9080],{9080:(A,b,u)=>{u.r(b),u.d(b,{EditRecordPageModule:()=>M});var E=u(177),i=u(4341),a=u(4742),f=u(8465),c=u(467),e=u(4438),x=u(4945),P=u(8539);function v(n,d){1&n&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"Name is required."),e.k0s()())}function R(n,d){1&n&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"Item Details are required."),e.k0s()())}function y(n,d){1&n&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"Please enter a valid amount."),e.k0s()())}function _(n,d){1&n&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"Please enter a valid amount."),e.k0s()())}function F(n,d){1&n&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"Please enter a valid 10-digit phone number."),e.k0s()())}function k(n,d){1&n&&(e.j41(0,"ion-text",15)(1,"p",16),e.EFF(2,"Name of the Person who Ordered is required."),e.k0s()())}function I(n,d){1&n&&e.nrm(0,"ion-spinner",17)}function N(n,d){1&n&&(e.j41(0,"span"),e.EFF(1,"Update Record"),e.k0s())}const C=[{path:"",component:(()=>{var n;class d{constructor(t,o,r,l,s,m,g){this.route=t,this.router=o,this.fb=r,this.formDataService=l,this.alertController=s,this.loadingController=m,this.recordService=g,this.isLoading=!1,this.form=this.fb.group({name:["",i.k0.required],itemDetails:["",i.k0.required],amountPaid:["",[i.k0.required,i.k0.min(0)]],actualAmount:["",[i.k0.required,i.k0.min(0)]],phoneNumber:["",[i.k0.required,i.k0.pattern("^[0-9]{10}$")]],userName:["",i.k0.required]})}ngOnInit(){const t=this.route.snapshot.paramMap.get("documentId");null!==t?(this.documentId=t,this.loadRecord()):this.handleMissingId()}handleInvalidId(){var t=this;return(0,c.A)(function*(){yield(yield t.alertController.create({header:"Invalid Document ID",message:"The provided document ID is invalid.",buttons:[{text:"OK",handler:()=>{t.router.navigate(["/tabs/records"])}}]})).present()})()}handleMissingId(){var t=this;return(0,c.A)(function*(){yield(yield t.alertController.create({header:"Missing Document ID",message:"No document ID was provided.",buttons:[{text:"OK",handler:()=>{t.router.navigate(["/tabs/records"])}}]})).present()})()}loadRecord(){var t=this;return(0,c.A)(function*(){const o=yield t.loadingController.create({message:"Loading Record..."});var r;yield o.present(),t.formDataService.getRecordByDocumentId(t.documentId).subscribe({next:r=>{r?(t.record=r,t.form.patchValue({name:t.record.name,itemDetails:t.record.itemDetails,amountPaid:t.record.amountPaid,actualAmount:t.record.actualAmount,phoneNumber:t.record.phoneNumber,userName:t.record.userName}),o.dismiss()):(o.dismiss(),t.showAlert("Record Not Found","The record you are trying to edit does not exist."))},error:(r=(0,c.A)(function*(l){o.dismiss(),t.showAlert("Error","Failed to load the record. Please try again."),console.error("Error fetching record:",l)}),function(s){return r.apply(this,arguments)})})})()}onSubmit(){var t=this;return(0,c.A)(function*(){if(t.form.valid){t.isLoading=!0;const o=t.form.value,r=yield t.loadingController.create({message:"Updating Record..."});yield r.present(),t.formDataService.updateRecord(t.documentId,o).subscribe({next:(l=(0,c.A)(function*(){t.isLoading=!1,yield r.dismiss(),t.recordService.emitRecordUpdated(),yield(yield t.alertController.create({header:"Success",message:"Record updated successfully!",buttons:[{text:"OK",handler:()=>{t.router.navigate(["/tabs/records"])}}]})).present()}),function(){return l.apply(this,arguments)}),error:function(){var l=(0,c.A)(function*(s){t.isLoading=!1,yield r.dismiss(),yield(yield t.alertController.create({header:"Error",message:"Failed to update the record. Please try again.",buttons:["OK"]})).present(),console.error("Error updating record:",s)});return function(m){return l.apply(this,arguments)}}()})}else t.form.markAllAsTouched();var l})()}cancel(){this.router.navigate(["/tabs/records"])}showAlert(t,o){var r=this;return(0,c.A)(function*(){yield(yield r.alertController.create({header:t,message:o,buttons:["OK"]})).present()})()}}return(n=d).\u0275fac=function(t){return new(t||n)(e.rXU(f.nX),e.rXU(f.Ix),e.rXU(i.ok),e.rXU(x.Q),e.rXU(a.hG),e.rXU(a.Xi),e.rXU(P.n))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-edit-record"]],decls:48,vars:10,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],[3,"ngSubmit","formGroup"],["position","floating"],["type","text","formControlName","name","placeholder","Enter name of the Medicine"],["color","danger",4,"ngIf"],["formControlName","itemDetails","placeholder","Enter Medicine Details"],["type","number","formControlName","amountPaid","placeholder","Enter amount Paid"],["type","number","formControlName","actualAmount","placeholder","Enter actual amount"],["type","text","formControlName","phoneNumber","placeholder","Enter User Phone Number"],["type","text","formControlName","userName","placeholder","Enter Name of the person who Ordered"],["expand","block","type","submit",3,"disabled"],["name","dots",4,"ngIf"],[4,"ngIf"],["color","danger"],[1,"ion-padding-start"],["name","dots"]],template:function(t,o){if(1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Editing existing order"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return o.cancel()}),e.EFF(6,"Cancel"),e.k0s()()()(),e.j41(7,"ion-content",2)(8,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(9,"ion-item")(10,"ion-label",4),e.EFF(11,"Name :"),e.k0s(),e.nrm(12,"br")(13,"ion-input",5),e.k0s(),e.DNE(14,v,3,0,"ion-text",6),e.j41(15,"ion-item")(16,"ion-label",4),e.EFF(17,"Item Details :"),e.k0s(),e.nrm(18,"br")(19,"ion-textarea",7),e.k0s(),e.DNE(20,R,3,0,"ion-text",6),e.j41(21,"ion-item")(22,"ion-label",4),e.EFF(23,"Amount Paid in Advance :"),e.k0s(),e.nrm(24,"br")(25,"ion-input",8),e.k0s(),e.DNE(26,y,3,0,"ion-text",6),e.j41(27,"ion-item")(28,"ion-label",4),e.EFF(29,"Actual Amount :"),e.k0s(),e.nrm(30,"br")(31,"ion-input",9),e.k0s(),e.DNE(32,_,3,0,"ion-text",6),e.j41(33,"ion-item")(34,"ion-label",4),e.EFF(35,"Phone Number :"),e.k0s(),e.nrm(36,"br")(37,"ion-input",10),e.k0s(),e.DNE(38,F,3,0,"ion-text",6),e.j41(39,"ion-item")(40,"ion-label",4),e.EFF(41,"Name of the Person :"),e.k0s(),e.nrm(42,"br")(43,"ion-input",11),e.k0s(),e.DNE(44,k,3,0,"ion-text",6),e.j41(45,"ion-button",12),e.DNE(46,I,1,0,"ion-spinner",13)(47,N,2,0,"span",14),e.k0s()()()),2&t){let r,l,s,m,g,h;e.R7$(8),e.Y8G("formGroup",o.form),e.R7$(6),e.Y8G("ngIf",(null==(r=o.form.get("name"))?null:r.invalid)&&(null==(r=o.form.get("name"))?null:r.touched)),e.R7$(6),e.Y8G("ngIf",(null==(l=o.form.get("itemDetails"))?null:l.invalid)&&(null==(l=o.form.get("itemDetails"))?null:l.touched)),e.R7$(6),e.Y8G("ngIf",(null==(s=o.form.get("amountPaid"))?null:s.invalid)&&(null==(s=o.form.get("amountPaid"))?null:s.touched)),e.R7$(6),e.Y8G("ngIf",(null==(m=o.form.get("actualAmount"))?null:m.invalid)&&(null==(m=o.form.get("actualAmount"))?null:m.touched)),e.R7$(6),e.Y8G("ngIf",(null==(g=o.form.get("phoneNumber"))?null:g.invalid)&&(null==(g=o.form.get("phoneNumber"))?null:g.touched)),e.R7$(6),e.Y8G("ngIf",(null==(h=o.form.get("userName"))?null:h.invalid)&&(null==(h=o.form.get("userName"))?null:h.touched)),e.R7$(),e.Y8G("disabled",o.form.invalid||o.isLoading),e.R7$(),e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading)}},dependencies:[E.bT,i.qT,i.BC,i.cb,a.Jm,a.QW,a.W9,a.eU,a.$w,a.uz,a.he,a.w2,a.IO,a.nc,a.BC,a.ai,a.su,a.Gw,i.j4,i.JD],styles:[".form-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto;padding:16px;border-radius:8px;background-color:#fff;box-shadow:0 4px 8px #0000001a}ion-item[_ngcontent-%COMP%]{margin-bottom:16px}ion-label[_ngcontent-%COMP%]{font-size:14px;color:#000;text-transform:uppercase;font-weight:700}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--padding-top: 10px;--padding-bottom: 10px;font-size:16px;border:1px solid #e0e0e0;background-color:#e0e0e0;color:#000;border-radius:4px}ion-textarea[_ngcontent-%COMP%]{min-height:80px}ion-button[_ngcontent-%COMP%]{margin-top:16px;--padding-start: 24px;--padding-end: 24px;--padding-top: 12px;--padding-bottom: 12px;--border-radius: 4px;font-weight:700;font-size:16px}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:14px;margin-top:4px;margin-left:8px}ion-text[_ngcontent-%COMP%]{display:block;margin-bottom:16px;font-size:16px;color:#888}"]}),d})()}];let D=(()=>{var n;class d{}return(n=d).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.iI.forChild(C),f.iI]}),d})(),M=(()=>{var n;class d{}return(n=d).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[E.MD,i.YN,a.bv,i.X1,D]}),d})()}}]);