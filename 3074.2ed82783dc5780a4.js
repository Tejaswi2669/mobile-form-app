"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3074],{3074:(v,f,i)=>{i.r(f),i.d(f,{RecordsPageModule:()=>C});var c=i(4742),h=i(4341),g=i(8465),u=i(467),e=i(4438),m=i(4945),R=i(8539),p=i(177);function P(t,s){if(1&t){const n=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"ion-buttons")(15,"ion-button",6),e.bIt("click",function(){const o=e.eBV(n).$implicit,d=e.XpG();return e.Njj(d.editRecord(o))}),e.nrm(16,"ion-icon",7),e.k0s(),e.j41(17,"ion-button",8),e.bIt("click",function(){const o=e.eBV(n).$implicit,d=e.XpG();return e.Njj(d.deleteRecord(o))}),e.nrm(18,"ion-icon",9),e.k0s()()()()}if(2&t){const n=s.$implicit;e.R7$(2),e.JRh(n.name),e.R7$(2),e.JRh(n.itemDetails),e.R7$(2),e.JRh(n.amountPaid),e.R7$(2),e.JRh(n.actualAmount),e.R7$(2),e.JRh(n.phoneNumber),e.R7$(2),e.JRh(n.userName)}}function b(t,s){1&t&&(e.j41(0,"ion-text",10)(1,"p"),e.EFF(2,"No records found."),e.k0s()())}const F=[{path:"",component:(()=>{var t;class s{constructor(r,o,d,a,l){this.formDataService=r,this.alertController=o,this.loadingController=d,this.router=a,this.recordService=l,this.records=[]}ngOnInit(){this.recordUpdateSubscription=this.recordService.recordUpdated$.subscribe(()=>{this.loadRecords()})}ionViewWillEnter(){this.loadRecords()}ngOnDestroy(){this.recordUpdateSubscription&&this.recordUpdateSubscription.unsubscribe()}loadRecords(){var r=this;return(0,u.A)(function*(){const o=yield r.loadingController.create({message:"Loading Records..."});var d;yield o.present(),r.formDataService.getAllRecords().subscribe({next:d=>{r.records=d.data,o.dismiss()},error:(d=(0,u.A)(function*(a){o.dismiss(),yield(yield r.alertController.create({header:"Error",message:"Failed to load records. Please try again.",buttons:["OK"]})).present(),console.error("Error fetching records:",a)}),function(l){return d.apply(this,arguments)})})})()}editRecord(r){this.router.navigate(["/edit-record",r.documentId])}deleteRecord(r){var o=this;return(0,u.A)(function*(){yield(yield o.alertController.create({header:"Confirm Delete",message:`Are you sure you want to delete record "${r.name}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{var a;o.formDataService.deleteRecord(r.id).subscribe({next:()=>{o.records=o.records.filter(a=>a.id!==r.id)},error:(a=(0,u.A)(function*(l){yield(yield o.alertController.create({header:"Error",message:"Failed to delete the record. Please try again.",buttons:["OK"]})).present(),console.error("Error deleting record:",l)}),function(M){return a.apply(this,arguments)})})}}]})).present()})()}}return(t=s).\u0275fac=function(r){return new(r||t)(e.rXU(m.Q),e.rXU(c.hG),e.rXU(c.Xi),e.rXU(g.Ix),e.rXU(R.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-records"]],decls:26,vars:2,consts:[[1,"ion-padding"],[1,"table-responsive"],[1,"records-table"],[2,"color","black"],[4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],["color","primary",3,"click"],["slot","icon-only","name","create-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"ion-text-center"]],template:function(r,o){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"List of Pre Orders"),e.k0s()()(),e.j41(4,"ion-content",0)(5,"div",1)(6,"table",2)(7,"thead",3)(8,"tr")(9,"th"),e.EFF(10,"Name"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Item Details"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Amount Paid"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Actual Amount"),e.k0s(),e.j41(17,"th"),e.EFF(18,"Phone"),e.k0s(),e.j41(19,"th"),e.EFF(20,"User"),e.k0s(),e.j41(21,"th"),e.EFF(22,"Actions"),e.k0s()()(),e.j41(23,"tbody"),e.DNE(24,P,19,6,"tr",4),e.k0s()()(),e.DNE(25,b,3,0,"ion-text",5),e.k0s()),2&r&&(e.R7$(24),e.Y8G("ngForOf",o.records),e.R7$(),e.Y8G("ngIf",0===o.records.length))},dependencies:[c.Jm,c.QW,c.W9,c.eU,c.iq,c.IO,c.BC,c.ai,p.Sq,p.bT],styles:[".table-responsive[_ngcontent-%COMP%]{width:100%;overflow-x:auto;margin-top:16px;padding:16px;border-radius:8px;background-color:#fff;box-shadow:0 4px 8px #0000001a}.records-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:16px}.records-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:12px;text-align:left}.records-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;text-transform:uppercase;font-size:14px;color:#333}.records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;color:#555}.records-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.records-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f7ff}.records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 6px;--padding-bottom: 6px;--border-radius: 4px}.ion-text-center[_ngcontent-%COMP%]{margin-top:24px;font-size:18px;color:#888}"]}),s})()}];let x=(()=>{var t;class s{}return(t=s).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(F),g.iI]}),s})(),C=(()=>{var t;class s{}return(t=s).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[c.bv,p.MD,h.YN,h.X1,x]}),s})()}}]);